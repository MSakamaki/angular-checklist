---
title: 高性能なものと最小限の処理しかしないコンポーネントを使う
---

# Problem

主要なフロントエンドフレームワークはすべてコンポーネントベースのアーキテクチャに移行しつつあります。 コンポーネントは、HTML、JavaScript、およびCSSの組み合わせです。
全てのコンポーネントへサービスを注入し、それぞれが自分自身でデータを取得する場合、コンポーネント同士が密結合になってしまい、コンポーネントベースのアーキテクチャーの価値を十分に活かしきれていません。

# 解決策

コンポーネントをレイアウトするための最も推奨される方法は、高性能なコンポーネント（スマートコンポーネント）と最小限の処理しかしないコンポーネント（ダムコンポーネント）を使うことです（この原則は色々と名前がついていますが、考え方は同じです）。

## コンポーネントの種類

### ダムコンポーネント

* `@Input`を介してデータを受け取り、`@Output`を介して直接の親とだけやり取りを行います。
* ダムコンポーネントは入力に `Observables`を受け取るべきではありません。
* ダムコンポーネントは、アプリケーションの他の部分について何も知らないので、自分はどこで使われるのかがわかりません。
*ビジネスロジックを含めることができますが、このコンポーネントのスコープにのみ属するロジックを含めるべきです。 
たとえば、ページネーションコンポーネントには、表示する「入れ物」の数を計算するためのロジックを含めることができます。 ユーザーがページ番号をクリックしたときに何が起こるかわかりません。 その場合、何かが起こったことを親に通知するためのカスタムイベントを発行します。 その後、親コンポーネントは何をすべきかを決めると共に処理を行います。
* ダムコンポーネントは自分の子として他のダムコンポーネントを使うことができます。
* ダムコンポーネントにはアプリケーションのビューレイヤに関連するサービス（`TranslateService`や`Router`など）を注入することはできますが、データを取得するなどのビジネスロジックを扱うサービスは決して注入できません。

### スマートコンポーネント

* スマートコンポーネントはアプリケーションレベルのコンポーネントです。
* データを取得したり変更内容を保持する方法を知っています。
* データは可能な限りダムコンポーネントに渡し、ほとんどの場合、データを取得するためのビジネスロジックしか持ちません。
* スマートコンポーネントのテンプレートはいくつかのダムコンポーネントで構成されています。
* ダムコンポーネントから発行されたイベントを受け取り、必要な処理を実行します。

## 利点

* ダムコンポーネントは定義済みのAPIを持ち、ビジネスロジックから独立しているので再利用できます。
* ダムコンポーネントは完全に分離されているためテストが簡単です。
* あなたのコンポーネントの全体的なアーキテクチャーは、推論しやすくなります。 ビジネスロジックに問題がある場合、またはデータが正しく取得されない場合は、スマートコンポーネントが責任を持つため、スマートコンポーネントから探索をはじめる必要があることがわかります。

# 関連資料

* [Presentational and container components](https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0) by Dan Abramov
* [Smart components vs presentational components](https://blog.angular-university.io/angular-2-smart-components-vs-presentation-components-whats-the-difference-when-to-use-each-and-why/) by Angular University
* [The smart vs dumb component quiz](https://blog.strongbrew.io/the-smart-vs-dumb-components-quiz/) by Kwinten Pisman
